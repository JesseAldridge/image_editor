
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'>
</script>

<style>
.main_container {
    width:800px;
    height:600px;
    overflow:scroll;
    display:inline-block;
}

#main_canvas {
    position:relative;
}
</style>

<!-- The hidden image, the inputs container, the canvas.  Initial draw. -->

<body onload="draw()">
<img src="1.png" id="img" style='display:none'>
<div class="main_container">
<canvas id='main_canvas'></canvas>
</div>
</body>

<script>

var main_con = $('.main_container'),
    zoom = 5,
    image_width = $('img').width(),
    image_height = $('img').height(),
    canvas_width = image_width * zoom,
    canvas_height = image_height * zoom,
    view_x = 10, view_y = 10,
    view_width = main_con.width() / zoom, // in image coords
    view_height = main_con.height() / zoom

// Resize canvas to image.

$('#main_canvas').attr('width', canvas_width)
$('#main_canvas').attr('height', canvas_height)

function draw() {

    // Access the canvas.

    var canvas = $("#main_canvas")
    var container = $('#main_canvas').parent()
    var ctx = canvas[0].getContext("2d")

    // Draw the big image.

    var img = document.getElementById("img")
    ctx.imageSmoothingEnabled = false
    ctx.drawImage(img, 0, 0, canvas_width, canvas_height)
}


$(document).on('mousemove', function(e) {
    console.log('mousemove')
    view_x = e.clientX
    view_y = e.clientY
    $('#main_canvas').offset({left:-view_x, top:-view_y})
})

</script>
